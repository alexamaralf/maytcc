<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Educa√ß√£o Sexual Interativa ‚Äî Guia Completo + Quiz</title>
  <meta name="description" content="Guia completo, acess√≠vel e atualizado de educa√ß√£o sexual com explica√ß√µes claras sobre consentimento, preven√ß√£o, ISTs, rela√ß√µes saud√°veis e um quiz interativo." />
  <meta name="theme-color" content="#4a90e2" />
  <meta property="og:title" content="Educa√ß√£o Sexual Interativa ‚Äî Guia + Quiz" />
  <meta property="og:description" content="Aprenda de forma segura e sem tabus. Leia o guia completo e teste seus conhecimentos no quiz interativo." />
  <meta property="og:type" content="website" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* --- Reset & base --- */
    :root{
      --bg:#f4f7f9;--fg:#222;--muted:#6b7280;--card:#fff;--primary:#4a90e2;--secondary:#50e3c2;--ok:#28a745;--warn:#ffc107;--bad:#dc3545;--border:#e5e7eb;
    }
    :root.dark{
      --bg:#0b1220;--fg:#e5e7eb;--muted:#9aa3b2;--card:#0f172a;--primary:#60a5fa;--secondary:#34d399;--ok:#22c55e;--warn:#f59e0b;--bad:#ef4444;--border:#1f2937;
    }
    html{scroll-behavior:smooth}
    *{box-sizing:border-box}
    body{margin:0;font-family:'Poppins','Segoe UI',system-ui,Arial,sans-serif;background:var(--bg);color:var(--fg);line-height:1.6}
    a{color:var(--primary)}
    .container{max-width:1000px;margin:0 auto;padding:0 1.25rem}

    /* Skip link */
    .skip-link{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip-link:focus{position:static;width:auto;height:auto;padding:.5rem 1rem;background:var(--primary);color:#fff;border-radius:.5rem}

    /* Header */
    header{background:linear-gradient(90deg,var(--primary),var(--secondary));color:#fff;padding:2.75rem 0 1.5rem;border-bottom-left-radius:18px;border-bottom-right-radius:18px}
    .brand{display:flex;align-items:center;gap:.75rem}
    .brand svg{flex:0 0 auto}
    header h1{margin:.25rem 0 0;font-size:clamp(1.6rem,4vw,2.4rem)}
    header p{margin:.25rem 0 0;opacity:.9}

    /* Top nav */
    .topbar{display:flex;justify-content:space-between;align-items:center;gap:1rem}
    .nav{display:flex;flex-wrap:wrap;gap:.5rem}
    .nav a{display:inline-block;padding:.4rem .75rem;border-radius:.6rem;background:rgba(255,255,255,.15);backdrop-filter:saturate(120%) blur(2px);color:#fff;text-decoration:none}
    .toggle{border:0;background:rgba(255,255,255,.15);color:#fff;border-radius:.6rem;padding:.45rem .7rem;cursor:pointer}

    main{padding:2rem 0}
    .grid{display:grid;gap:1.25rem}
    @media (min-width:900px){.grid{grid-template-columns:2fr 1fr;align-items:start}}

    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:1.5rem;box-shadow:0 10px 30px rgba(0,0,0,.06)}
    .card h2{margin-top:0;color:var(--primary);font-size:clamp(1.2rem,2.5vw,1.6rem);border-bottom:2px solid var(--border);padding-bottom:.5rem;margin-bottom:1rem}
    .intro{background:var(--card);text-align:center}
    .intro h2{color:var(--fg);border:0;font-size:clamp(1.4rem,3vw,2rem)}
    .muted{color:var(--muted)}

    .methods{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:1rem}
    .method{background:linear-gradient(0deg,transparent 0,transparent 78%,rgba(80,227,194,.15) 78%);border:1px solid var(--border);border-left:4px solid var(--secondary);border-radius:10px;padding:1rem}
    .method h4{margin:.2rem 0 .4rem;color:var(--primary)}

    .two-col{display:grid;gap:1rem}
    @media(min-width:760px){.two-col{grid-template-columns:1fr 1fr}}
    .good h4{color:var(--ok)}
    .bad h4{color:var(--bad)}
    ul{margin:0;padding-left:1.1rem}
    li{margin:.5rem 0}

    .table{width:100%;border-collapse:separate;border-spacing:0;border:1px solid var(--border);border-radius:12px;overflow:hidden}
    .table th,.table td{padding:.7rem .8rem;border-bottom:1px solid var(--border)}
    .table thead th{background:rgba(74,144,226,.08)}
    .table tr:last-child td{border-bottom:0}

    details{border:1px solid var(--border);border-radius:10px;padding:1rem}
    summary{cursor:pointer;font-weight:600}

    .help{background:rgba(255,193,7,.08);border-left:6px solid var(--warn)}
    .help h2{color:#b7791f}

    /* Quiz */
    #quiz{scroll-margin-top:90px}
    .question{margin-bottom:1.25rem;padding-bottom:1rem;border-bottom:1px solid var(--border)}
    .question legend{font-weight:600}
    .option{display:block;margin:.45rem 0}
    .option input{margin-right:.5rem}
    .correct{background:rgba(34,197,94,.12);border-color:var(--ok)!important}
    .incorrect{background:rgba(239,68,68,.10);border-color:var(--bad)!important}
    .feedback{font-size:.95rem}

    .actions{display:flex;gap:.75rem;flex-wrap:wrap;margin-top:1rem}
    .btn{border:1px solid var(--border);background:var(--primary);color:#fff;border-radius:10px;padding:.7rem 1rem;cursor:pointer}
    .btn.secondary{background:transparent;color:var(--primary)}

    .progress-wrap{display:flex;align-items:center;justify-content:space-between;margin-top:.75rem}
    .progress{height:10px;background:rgba(74,144,226,.25);border-radius:999px;overflow:hidden}
    .progress>span{display:block;height:100%;width:0;background:var(--primary)}

    footer{color:var(--muted);text-align:center;padding:2rem 1rem}

    /* Motion prefs */
    @media (prefers-reduced-motion:reduce){html{scroll-behavior:auto}*{transition:none!important}}
  </style>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {"@type":"Question","name":"Qual a diferen√ßa entre IST e DST?","acceptedAnswer":{"@type":"Answer","text":"IST √© o termo atual porque muitas infec√ß√µes podem n√£o apresentar sintomas, mas ainda assim serem transmiss√≠veis. DST pressup√µe doen√ßa, isto √©, sintomas."}},
      {"@type":"Question","name":"O que fazer em caso de viol√™ncia ou abuso?","acceptedAnswer":{"@type":"Answer","text":"Procure um local seguro, conte para algu√©m de confian√ßa e busque ajuda profissional. Ligue 180 (Central de Atendimento √† Mulher) ou 190 em emerg√™ncias."}}
    ]
  }
  </script>
</head>
<body>
  <a class="skip-link" href="#conteudo">Pular para o conte√∫do</a>
  <header>
    <div class="container">
      <div class="topbar">
        <div class="brand" aria-label="Educa√ß√£o Sexual Interativa">
          <svg width="42" height="42" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true"><path d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2Zm0 3a7 7 0 1 1-7 7 7.008 7.008 0 0 1 7-7Z" fill="white" opacity=".8"/><path d="M12 7a5 5 0 1 0 5 5 5.006 5.006 0 0 0-5-5Z" fill="white"/></svg>
          <div>
            <h1>Educa√ß√£o Sexual Interativa</h1>
            <p class="muted">Aprenda de forma divertida, segura e sem tabus.</p>
          </div>
        </div>
        <nav class="nav" aria-label="Navega√ß√£o principal">
          <a href="#consentimento">Consentimento</a>
          <a href="#contracepcao">Contracep√ß√£o</a>
          <a href="#ists">ISTs</a>
          <a href="#relacionamentos">Rela√ß√µes</a>
          <a href="#quiz">Quiz</a>
          <button class="toggle" id="themeToggle" aria-pressed="false" aria-label="Alternar tema claro/escuro">üåô</button>
        </nav>
      </div>
    </div>
  </header>

  <main id="conteudo">
    <div class="container grid">
      <!-- Coluna principal -->
      <section class="card intro" aria-labelledby="intro-title">
        <h2 id="intro-title">‚ú® Guia Essencial: Sexualidade com Informa√ß√£o e Respeito</h2>
        <p>Educa√ß√£o sexual √© sobre sa√∫de, direitos, preven√ß√£o e comunica√ß√£o. Nesta p√°gina voc√™ encontra um panorama abrangente ‚Äî do consentimento aos m√©todos contraceptivos, das ISTs a sinais de rela√ß√µes saud√°veis ‚Äî e, ao final, um <strong>quiz interativo</strong> para testar o que aprendeu.</p>
        <p class="muted">Conte√∫do educativo e informativo. Em d√∫vidas sobre sua sa√∫de, procure servi√ßos e profissionais de sa√∫de.</p>
      </section>

      <aside class="card" aria-label="Sum√°rio">
        <h2>üîé O que voc√™ vai ver</h2>
        <ul>
          <li><a href="#consentimento">O que √© consentimento e como pratic√°-lo</a></li>
          <li><a href="#contracepcao">Tipos de m√©todos contraceptivos</a></li>
          <li><a href="#ists">Preven√ß√£o e testes de ISTs</a></li>
          <li><a href="#relacionamentos">Sinais de rela√ß√µes saud√°veis</a></li>
          <li><a href="#mitos">Mitos & fatos comuns</a></li>
          <li><a href="#faq">Perguntas frequentes</a></li>
          <li><a href="#ajuda">Canais de ajuda</a></li>
          <li><a href="#quiz"><strong>Ir direto ao quiz</strong></a></li>
        </ul>
      </aside>

      <section id="consentimento" class="card" aria-labelledby="cons-title">
        <h2 id="cons-title">ü§ù O Pilar de Tudo: Consentimento</h2>
        <p>Consentimento √© uma <strong>permissaÃÉo clara, entusiasmada e cont√≠nua</strong>. N√£o √© a aus√™ncia de um "n√£o"; √© a presen√ßa do <em>sim</em>. Ele pode ser retirado a qualquer momento.</p>
        <div class="two-col">
          <div class="good">
            <h4>Sinais de consentimento</h4>
            <ul>
              <li>Comunica√ß√£o clara ("quero", "topo").</li>
              <li>Entusiasmo e conforto vis√≠veis.</li>
              <li>Liberdade para dizer n√£o sem press√£o.</li>
            </ul>
          </div>
          <div class="bad">
            <h4>N√£o √© consentimento quando‚Ä¶</h4>
            <ul>
              <li>H√° medo, coer√ß√£o, chantagem ou intoxica√ß√£o.</li>
              <li>O sil√™ncio √© interpretado como concord√¢ncia.</li>
              <li>Uma concess√£o anterior √© usada para for√ßar outra.</li>
            </ul>
          </div>
        </div>
      </section>

      <section id="contracepcao" class="card" aria-labelledby="contr-title">
        <h2 id="contr-title">üõ°Ô∏è Preven√ß√£o e Planejamento: M√©todos Contraceptivos</h2>
        <p>A escolha do m√©todo depende de sa√∫de, rotina e prefer√™ncias. Idealmente, decida com orienta√ß√£o profissional. Preservativos tamb√©m reduzem o risco de ISTs.</p>
        <div class="methods">
          <div class="method">
            <h4>M√©todos de barreira</h4>
            <p>Camisinha interna (feminina) e externa (masculina), diafragma. Criam uma barreira f√≠sica entre espermatozoides e √≥vulo.</p>
          </div>
          <div class="method">
            <h4>M√©todos hormonais</h4>
            <p>P√≠lulas combinadas e de progesterona, adesivo, anel, inje√ß√£o, implante e DIU hormonal. Agem impedindo ovula√ß√£o e/ou espessando o muco cervical.</p>
          </div>
          <div class="method">
            <h4>Dispositivos intrauterinos (DIU)</h4>
            <p>Hormonal (levonorgestrel) ou de cobre (n√£o hormonal). Longa dura√ß√£o e alta efic√°cia.</p>
          </div>
          <div class="method">
            <h4>Emerg√™ncia</h4>
            <p>P√≠lula de emerg√™ncia e DIU de cobre ap√≥s rela√ß√£o desprotegida. Uso pontual, n√£o substitui m√©todo regular.</p>
          </div>
        </div>
        <h3 class="muted" style="margin-top:1rem">Vis√£o r√°pida de efic√°cia (uso t√≠pico)</h3>
        <table class="table" role="table" aria-label="Tabela de efic√°cia">
          <thead><tr><th>M√©todo</th><th>Efic√°cia aproximada</th><th>Observa√ß√µes</th></tr></thead>
          <tbody>
            <tr><td>DIU (cobre/hormonal), Implante</td><td>‚âà &gt; 99%</td><td>Baixa manuten√ß√£o.</td></tr>
            <tr><td>Inje√ß√£o, p√≠lula, adesivo, anel</td><td>‚âà 91‚Äì94%</td><td>Exige uso correto e regular.</td></tr>
            <tr><td>Camisinha</td><td>‚âà 85%</td><td>√önico m√©todo que tamb√©m ajuda a prevenir ISTs.</td></tr>
            <tr><td>Coito interrompido/tabelinha</td><td>Baixa</td><td>Elevada chance de falha.</td></tr>
          </tbody>
        </table>
      </section>

      <section id="ists" class="card" aria-labelledby="ists-title">
        <h2 id="ists-title">üî¨ Protegendo sua Sa√∫de: ISTs</h2>
        <ul>
          <li><strong>Preven√ß√£o:</strong> uso consistente de preservativos; considerar vacina√ß√£o dispon√≠vel (ex.: HPV, hepatite B).</li>
          <li><strong>Testagem:</strong> exames regulares, especialmente em novos relacionamentos ou m√∫ltiplos parceiros.</li>
          <li><strong>Di√°logo:</strong> converse sobre hist√≥rico de sa√∫de sexual e combinados de prote√ß√£o.</li>
          <li><strong>Tratamento:</strong> muitas ISTs t√™m tratamento/cura; diagn√≥stico precoce melhora resultados.</li>
        </ul>
        <details style="margin-top:1rem"><summary>Sobre HIV, PrEP e PEP</summary>
          <p>PrEP √© uma estrat√©gia de preven√ß√£o para pessoas com risco aumentado de exposi√ß√£o ao HIV; PEP √© uma medida de emerg√™ncia at√© 72 horas ap√≥s exposi√ß√£o de risco. Procure orienta√ß√£o de sa√∫de para indica√ß√£o adequada.</p>
        </details>
      </section>

      <section id="relacionamentos" class="card" aria-labelledby="rel-title">
        <h2 id="rel-title">‚ù§Ô∏è Construindo Rela√ß√µes Saud√°veis</h2>
        <p>Rela√ß√µes saud√°veis se sustentam em respeito, seguran√ßa e comunica√ß√£o.</p>
        <div class="two-col">
          <div class="good">
            <h4>Bons sinais</h4>
            <ul>
              <li>Respeito m√∫tuo, escuta e honestidade.</li>
              <li>Comunica√ß√£o aberta sobre limites, prefer√™ncias e prote√ß√£o.</li>
              <li>Autonomia e espa√ßo individual preservados.</li>
            </ul>
          </div>
          <div class="bad">
            <h4>Sinais de alerta</h4>
            <ul>
              <li>Controle, ci√∫me excessivo, invas√£o de privacidade.</li>
              <li>Press√£o para praticar algo sem vontade.</li>
              <li>Isolamento de amigos/fam√≠lia, desrespeito e humilha√ß√µes.</li>
            </ul>
          </div>
        </div>
        <details style="margin-top:1rem"><summary>Seguran√ßa digital e sexting</summary>
          <p>Compartilhe imagens apenas com consentimento expl√≠cito e sabendo dos riscos. Evite mostrar rosto/tatuagens, ative bloqueios de tela e use senhas fortes.</p>
        </details>
      </section>

      <section id="mitos" class="card" aria-labelledby="myths-title">
        <h2 id="myths-title">ü§î Mitos vs. Fatos</h2>
        <p class="muted">Desfa√ßa confus√µes comuns:</p>
        <div class="method"><strong>Mito:</strong> ‚ÄúP√≠lula do dia seguinte pode ser usada sempre.‚Äù<br><strong>Fato:</strong> √â recurso de emerg√™ncia; n√£o substitui m√©todos regulares.</div>
        <div class="method"><strong>Mito:</strong> ‚ÄúN√£o engravida na primeira vez.‚Äù<br><strong>Fato:</strong> Gravidez pode ocorrer em qualquer rela√ß√£o desprotegida.</div>
        <div class="method"><strong>Mito:</strong> ‚ÄúPornografia √© guia confi√°vel.‚Äù<br><strong>Fato:</strong> Pornografia n√£o representa educa√ß√£o sexual de qualidade.</div>
      </section>

      <section id="faq" class="card" aria-labelledby="faq-title">
        <h2 id="faq-title">‚ùì Perguntas Frequentes</h2>
        <details>
          <summary>Qual a diferen√ßa entre IST e DST?</summary>
          <p>IST √© o termo mais atual porque muitas infec√ß√µes n√£o apresentam sintomas, mas ainda s√£o transmiss√≠veis. DST implica doen√ßa, isto √©, sintomas.</p>
        </details>
        <details>
          <summary>O que fazer em caso de viol√™ncia ou abuso?</summary>
          <p>Sua seguran√ßa √© prioridade. Procure um local seguro, conte para algu√©m de confian√ßa e busque ajuda profissional. Ligue <strong>180</strong> (Central de Atendimento √† Mulher) e, em emerg√™ncias, <strong>190</strong> ou SAMU <strong>192</strong>.</p>
        </details>
      </section>

      <section id="ajuda" class="card help" aria-labelledby="help-title">
        <h2 id="help-title">üìû Canais de Ajuda e Apoio</h2>
        <p>Voc√™ n√£o est√° sozinho(a). Procure apoio:</p>
        <ul>
          <li>üö® Emerg√™ncias: <strong>190</strong></li>
          <li>üöë SAMU: <strong>192</strong></li>
          <li>‚ôÄÔ∏è Viol√™ncia contra a Mulher: <strong>180</strong></li>
          <li>üí¨ Preven√ß√£o ao Suic√≠dio (CVV): <strong>188</strong></li>
        </ul>
      </section>

      <!-- QUIZ -->
      <section id="quiz" class="card" aria-labelledby="quiz-title">
        <h2 id="quiz-title">üß† Teste Seus Conhecimentos</h2>
        <p>Responda e clique em <em>Verificar respostas</em>. Voc√™ ver√° o que acertou, explica√ß√µes e seu progresso. Os resultados mais recentes ficam salvos no seu navegador.</p>
        <form id="quizForm" novalidate></form>
        <div class="actions">
          <button class="btn" id="submitBtn" type="button">Verificar respostas</button>
          <button class="btn secondary" id="retryBtn" type="button">Refazer</button>
        </div>
        <div class="progress-wrap" aria-live="polite">
          <small id="progressText" class="muted">Progresso: 0 / 10</small>
          <div class="progress" style="flex:1;margin-left:1rem" aria-hidden="true"><span id="progressBar"></span></div>
        </div>
        <p id="result" class="muted" role="status" aria-live="polite" style="margin-top:.8rem"></p>
      </section>
    </div>
  </main>

  <footer>
    <p>¬© 2025 Educa√ß√£o Sexual Interativa. Informa√ß√£o √© preven√ß√£o.</p>
  </footer>

  <script>
  (function(){
    // Tema (dark/light)
    const root = document.documentElement;
    const themeToggle = document.getElementById('themeToggle');
    const savedTheme = localStorage.getItem('theme');
    if(savedTheme==='dark'){root.classList.add('dark'); themeToggle.setAttribute('aria-pressed','true'); themeToggle.textContent='‚òÄÔ∏è';}
    themeToggle?.addEventListener('click',()=>{
      root.classList.toggle('dark');
      const dark = root.classList.contains('dark');
      themeToggle.setAttribute('aria-pressed', String(dark));
      themeToggle.textContent = dark ? '‚òÄÔ∏è' : 'üåô';
      localStorage.setItem('theme', dark?'dark':'light');
    });

    // Quiz
    const elForm = document.getElementById('quizForm');
    const elSubmit = document.getElementById('submitBtn');
    const elRetry = document.getElementById('retryBtn');
    const elResult = document.getElementById('result');
    const elProgressText = document.getElementById('progressText');
    const elProgressBar = document.getElementById('progressBar');

    const quizData = [
      {q:"Usar camisinha ajuda a prevenir ISTs?", opts:["Sim","N√£o"], a:"Sim", tip:"Preservativos reduzem o risco de transmiss√£o de muitas ISTs quando usados corretamente." , link:'#ists'},
      {q:"P√≠lula do dia seguinte pode ser usada como anticoncepcional regular?", opts:["Sim","N√£o"], a:"N√£o", tip:"√â um recurso de emerg√™ncia e n√£o substitui m√©todos de rotina.", link:'#contracepcao'},
      {q:"Consentimento significa que as duas pessoas querem e concordam?", opts:["Sim","N√£o"], a:"Sim", tip:"Consentimento deve ser claro, entusiasmado e cont√≠nuo.", link:'#consentimento'},
      {q:"O m√©todo da tabelinha √© 100% seguro para prevenir gravidez?", opts:["Sim","N√£o"], a:"N√£o", tip:"M√©todos comportamentais t√™m maior taxa de falha em uso t√≠pico.", link:'#contracepcao'},
      {q:"Camisinha interna (feminina) √© uma op√ß√£o de preven√ß√£o de ISTs?", opts:["Sim","N√£o"], a:"Sim", tip:"√â um m√©todo de barreira que tamb√©m ajuda a reduzir risco de ISTs.", link:'#contracepcao'},
      {q:"DST e IST s√£o a mesma coisa?", opts:["Sim","N√£o"], a:"N√£o", tip:"IST √© o termo atual; muitas infec√ß√µes podem n√£o ter sintomas.", link:'#faq'},
      {q:"√â poss√≠vel engravidar usando preservativo de forma incorreta?", opts:["Sim","N√£o"], a:"Sim", tip:"Uso incorreto aumenta risco de falha; aprenda a usar corretamente.", link:'#contracepcao'},
      {q:"√â importante fazer exames peri√≥dicos mesmo sem sintomas de ISTs?", opts:["Sim","N√£o"], a:"Sim", tip:"Muitas ISTs s√£o assintom√°ticas; testagem regular √© recomendada.", link:'#ists'},
      {q:"Pornografia √© um bom guia para aprender sobre sexo seguro?", opts:["Sim","N√£o"], a:"N√£o", tip:"N√£o substitui informa√ß√£o baseada em sa√∫de e seguran√ßa.", link:'#mitos'},
      {q:"Comunica√ß√£o aberta com o(a) parceiro(a) ajuda em rela√ß√µes saud√°veis?", opts:["Sim","N√£o"], a:"Sim", tip:"Conversar sobre limites, prote√ß√£o e sentimentos fortalece a rela√ß√£o.", link:'#relacionamentos'}
    ];

    function shuffle(arr){return [...arr].sort(()=>Math.random()-0.5)}

    function render(){
      elForm.innerHTML='';
      const data = shuffle(quizData); // embaralha a ordem a cada visita
      data.forEach((item, i)=>{
        const fs = document.createElement('fieldset');
        fs.className='question card';
        fs.style.border='1px solid var(--border)';
        fs.style.padding='1rem';
        fs.innerHTML = `<legend>${i+1}. ${item.q}</legend>`+
          item.opts.map(opt=>`<label class="option"><input type="radio" name="q${i}" value="${opt}"> ${opt}</label>`).join('')+
          `<div class="feedback muted" id="fb${i}" hidden>üí° <span></span> <a class="muted" href="${item.link}">Saiba mais</a></div>`;
        elForm.appendChild(fs);
      });
      updateProgress();
    }

    function updateProgress(){
      const total = elForm.querySelectorAll('fieldset').length;
      const answered = elForm.querySelectorAll('input[type="radio"]:checked').length;
      elProgressText.textContent = `Progresso: ${answered} / ${total}`;
      elProgressBar.style.width = `${(answered/Math.max(total,1))*100}%`;
    }

    elForm.addEventListener('change', updateProgress);

    elSubmit.addEventListener('click', ()=>{
      const fsets = [...elForm.querySelectorAll('fieldset')];
      let score=0;
      fsets.forEach((fs, i)=>{
        const checked = fs.querySelector('input[type="radio"]:checked');
        const labels = fs.querySelectorAll('label');
        labels.forEach(l=>l.classList.remove('correct','incorrect'));
        if(!checked){ return; }
        const question = quizData.find(x=>fs.querySelector('legend').textContent.includes(x.q.slice(0,8))) || null;
        const text = fs.querySelector('legend').textContent.replace(/^\d+\.\s/,'');
        const item = quizData.find(x=>x.q===text) || question; // fallback
        if(checked.value === item.a){
          score++; checked.parentElement.classList.add('correct');
        } else {
          checked.parentElement.classList.add('incorrect');
          [...labels].find(l=>l.textContent.trim().endsWith(item.a))?.classList.add('correct');
        }
        const fb = fs.querySelector('.feedback');
        if(fb){ fb.hidden=false; fb.querySelector('span').textContent = item.tip; }
      });
      const total = fsets.length;
      elResult.innerHTML = `üéâ Voc√™ acertou <strong>${score}</strong> de <strong>${total}</strong>!` + (score===total?" Parab√©ns!":" Continue aprendendo!");
      localStorage.setItem('quiz-last-score', JSON.stringify({score, total, at: new Date().toISOString()}));
    });

    elRetry.addEventListener('click',()=>{render(); elResult.textContent='';});

    // Exibir √∫ltimo resultado salvo
    const last = localStorage.getItem('quiz-last-score');
    if(last){ try{ const {score,total} = JSON.parse(last); elResult.innerHTML = `√öltimo resultado salvo: <strong>${score}/${total}</strong>.`; }catch(e){} }

    render();
  })();
  </script>
</body>
</html>
